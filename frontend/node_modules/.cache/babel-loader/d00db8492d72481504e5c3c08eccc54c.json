{"ast":null,"code":"import _classCallCheck from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/billbuff/projects/academy/capstone/ProperT-react/src/components/IndivProperty/IndivPropertyDetails.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport EditProperty from './EditProperty';\nimport GoogleMap from './GoogleMap';\nimport '../../styles/IndivPropDetails.css';\nimport defaultImage from '../../images/images.png';\n\nvar IndivPropertyDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(IndivPropertyDetails, _Component);\n\n  function IndivPropertyDetails(props) {\n    var _this;\n\n    _classCallCheck(this, IndivPropertyDetails);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(IndivPropertyDetails).call(this, props));\n\n    _this.toggle = function () {\n      var modal = _this.state.modal;\n\n      _this.setState({\n        modal: !modal\n      });\n    };\n\n    _this.toggleSubmit = function (e) {\n      var result = e.currentTarget.form.checkValidity();\n\n      if (result) {\n        var modal = _this.state.modal;\n\n        _this.setState({\n          modal: !modal\n        });\n      }\n\n      return null;\n    };\n\n    _this.handleImageUpload = function () {\n      var preview = document.querySelector('#editRentalImage');\n      var file = document.querySelector('#edit-prop-form input[type=file]').files[0];\n      var reader = new FileReader();\n      reader.addEventListener('load', function () {\n        preview.src = reader.result;\n      }, false);\n\n      if (file) {\n        return reader.readAsDataURL(file);\n      }\n\n      return null;\n    };\n\n    _this.handlePropertyUpdate = function (e) {\n      e.preventDefault(); // eslint-disable-next-line object-curly-newline, max-len\n\n      var _e$target = e.target,\n          address1 = _e$target.address1,\n          address2 = _e$target.address2,\n          city = _e$target.city,\n          state = _e$target.state,\n          zip = _e$target.zip,\n          image = _e$target.image,\n          tenantFirstName = _e$target.tenantFirstName,\n          tenantLastName = _e$target.tenantLastName,\n          tenantEmail = _e$target.tenantEmail,\n          leaseStart = _e$target.leaseStart,\n          leaseEnd = _e$target.leaseEnd,\n          rentalAmount = _e$target.rentalAmount;\n      var id = _this.props.currentRental._id;\n      var newData = {\n        address1: address1.value,\n        address2: address2.value,\n        city: city.value,\n        state: state.value,\n        zip: zip.value,\n        image: image.src,\n        tenantFirstName: tenantFirstName.value,\n        tenantLastName: tenantLastName.value,\n        tenantEmail: tenantEmail.value,\n        leaseStart: leaseStart.value,\n        leaseEnd: leaseEnd.value,\n        monthlyRent: rentalAmount.value\n      };\n      axios(\"\".concat(_this.url, \"/\").concat(id), {\n        method: 'put',\n        headers: {\n          'x-access-token': sessionStorage.getItem('jwt_token')\n        },\n        data: newData\n      }).then(function (response) {\n        var updateCurrentRental = _this.props.updateCurrentRental;\n        updateCurrentRental(response.data);\n      }).catch(function (err) {\n        // eslint-disable-next-line no-console\n        console.error('problem updating property', err);\n      });\n    };\n\n    _this.url = 'http://127.0.0.1:3001/rentals';\n    _this.state = {\n      modal: false\n    };\n    return _this;\n  }\n\n  _createClass(IndivPropertyDetails, [{\n    key: \"render\",\n    value: function render() {\n      var modal = this.state.modal;\n      var currentRental = this.props.currentRental;\n      var startDate;\n      var endDate;\n\n      if (!currentRental.leaseStart) {\n        currentRental.leaseStart = '';\n        startDate = '';\n      } else {\n        startDate = moment(new Date(currentRental.leaseStart.replace(/-/g, '/').replace(/T.+/, ''))).format('L');\n      }\n\n      if (!currentRental.leaseEnd) {\n        currentRental.leaseEnd = '';\n        endDate = '';\n      } else {\n        endDate = moment(new Date(currentRental.leaseEnd.replace(/-/g, '/').replace(/T.+/, ''))).format('L');\n      }\n\n      if (!currentRental.monthlyRent) {\n        currentRental.monthlyRent = '';\n      }\n\n      var leaseRange = \"\".concat(startDate, \" - \").concat(endDate);\n      var mapAddress = \"\".concat(currentRental.address1, \", \").concat(currentRental.city, \", \").concat(currentRental.state, \" \").concat(currentRental.zip);\n      return React.createElement(\"section\", {\n        id: \"indiv-property-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"prop-image\",\n        className: \"img-fluid rounded mx-auto d-block\",\n        src: currentRental.image || defaultImage,\n        alt: \"current property\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        id: \"map\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(GoogleMap, {\n        address: mapAddress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        id: \"prop-details-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        id: \"indiv-property-details-header\",\n        className: \"card-header text-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Property Details\"), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body text-left\",\n        id: \"prop-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"indiv-prop-address\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, currentRental.address1), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, currentRental.address2), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \"\".concat(currentRental.city, \", \").concat(currentRental.state, \" \").concat(currentRental.zip))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"prop-specs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        id: \"tenant-name\",\n        className: \"card-text indiv-prop-spec\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Current Tenant: \".concat(currentRental.tenantFirstName, \" \").concat(currentRental.tenantLastName)), React.createElement(\"p\", {\n        id: \"tenant-email\",\n        className: \"card-text indiv-prop-spec\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Current Tenant Email: \".concat(currentRental.tenantEmail)), React.createElement(\"p\", {\n        id: \"rental-amount\",\n        className: \"card-text indiv-prop-spec\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Monthly Rental Amount: $\".concat(currentRental.monthlyRent)), React.createElement(\"p\", {\n        id: \"lease-range\",\n        className: \"card-text indiv-prop-spec\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Lease Date Range: \".concat(leaseRange))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(EditProperty, {\n        isOpen: modal,\n        currentRental: currentRental,\n        toggle: this.toggle,\n        toggleSubmit: this.toggleSubmit,\n        onSubmit: this.handlePropertyUpdate,\n        onChange: this.handleImageUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(Button, {\n        id: \"edit-prop-button\",\n        className: \"btn btn-success btn-sm\",\n        type: \"button\",\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Edit Details\"))))))));\n    }\n  }]);\n\n  return IndivPropertyDetails;\n}(Component);\n\nIndivPropertyDetails.propTypes = {\n  currentRental: PropTypes.objectOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])).isRequired,\n  updateCurrentRental: PropTypes.func.isRequired\n};\nexport default IndivPropertyDetails;","map":{"version":3,"sources":["/Users/billbuff/projects/academy/capstone/ProperT-react/src/components/IndivProperty/IndivPropertyDetails.jsx"],"names":["React","Component","PropTypes","axios","Button","moment","EditProperty","GoogleMap","defaultImage","IndivPropertyDetails","props","toggle","modal","state","setState","toggleSubmit","e","result","currentTarget","form","checkValidity","handleImageUpload","preview","document","querySelector","file","files","reader","FileReader","addEventListener","src","readAsDataURL","handlePropertyUpdate","preventDefault","target","address1","address2","city","zip","image","tenantFirstName","tenantLastName","tenantEmail","leaseStart","leaseEnd","rentalAmount","id","currentRental","_id","newData","value","monthlyRent","url","method","headers","sessionStorage","getItem","data","then","response","updateCurrentRental","catch","err","console","error","startDate","endDate","Date","replace","format","leaseRange","mapAddress","propTypes","objectOf","oneOfType","string","number","isRequired","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport axios from 'axios';\nimport { Button } from 'reactstrap';\nimport moment from 'moment';\nimport EditProperty from './EditProperty';\nimport GoogleMap from './GoogleMap';\nimport '../../styles/IndivPropDetails.css';\nimport defaultImage from '../../images/images.png';\n\nclass IndivPropertyDetails extends Component {\n  constructor(props) {\n    super(props);\n    this.url = 'http://127.0.0.1:3001/rentals';\n    this.state = {\n      modal: false,\n    };\n  }\n\n  toggle = () => {\n    const { modal } = this.state;\n    this.setState({\n      modal: !modal,\n    });\n  }\n\n  toggleSubmit = (e) => {\n    const result = e.currentTarget.form.checkValidity();\n    if (result) {\n      const { modal } = this.state;\n      this.setState({\n        modal: !modal,\n      });\n    }\n    return null;\n  }\n\n  handleImageUpload = () => {\n    const preview = document.querySelector('#editRentalImage');\n    const file = document.querySelector('#edit-prop-form input[type=file]').files[0];\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      preview.src = reader.result;\n    }, false);\n\n    if (file) {\n      return reader.readAsDataURL(file);\n    }\n    return null;\n  }\n\n  handlePropertyUpdate = (e) => {\n    e.preventDefault();\n    // eslint-disable-next-line object-curly-newline, max-len\n    const { address1, address2, city, state, zip, image, tenantFirstName, tenantLastName, tenantEmail, leaseStart, leaseEnd, rentalAmount } = e.target;\n    const { currentRental: { _id: id } } = this.props;\n\n    const newData = {\n      address1: address1.value,\n      address2: address2.value,\n      city: city.value,\n      state: state.value,\n      zip: zip.value,\n      image: image.src,\n      tenantFirstName: tenantFirstName.value,\n      tenantLastName: tenantLastName.value,\n      tenantEmail: tenantEmail.value,\n      leaseStart: leaseStart.value,\n      leaseEnd: leaseEnd.value,\n      monthlyRent: rentalAmount.value,\n    };\n\n    axios(`${this.url}/${id}`, {\n      method: 'put',\n      headers: { 'x-access-token': sessionStorage.getItem('jwt_token') },\n      data: newData,\n    })\n      .then((response) => {\n        const { updateCurrentRental } = this.props;\n        updateCurrentRental(response.data);\n      })\n      .catch((err) => {\n        // eslint-disable-next-line no-console\n        console.error('problem updating property', err);\n      });\n  }\n\n  render() {\n    const { modal } = this.state;\n    const { currentRental } = this.props;\n    let startDate;\n    let endDate;\n\n    if (!currentRental.leaseStart) {\n      currentRental.leaseStart = '';\n      startDate = '';\n    } else {\n      startDate = moment(new Date(currentRental.leaseStart.replace(/-/g, '/').replace(/T.+/, ''))).format('L');\n    }\n\n    if (!currentRental.leaseEnd) {\n      currentRental.leaseEnd = '';\n      endDate = '';\n    } else {\n      endDate = moment(new Date(currentRental.leaseEnd.replace(/-/g, '/').replace(/T.+/, ''))).format('L');\n    }\n\n    if (!currentRental.monthlyRent) {\n      currentRental.monthlyRent = '';\n    }\n\n    const leaseRange = `${startDate} - ${endDate}`;\n\n    const mapAddress = `${currentRental.address1}, ${currentRental.city}, ${currentRental.state} ${currentRental.zip}`;\n\n    return (\n      <section id=\"indiv-property-details\">\n        <div className=\"row\">\n          <div className=\"col-md-3\">\n            <div className=\"row\">\n              <div className=\"col-md-12\">\n                <img id=\"prop-image\" className=\"img-fluid rounded mx-auto d-block\" src={currentRental.image || defaultImage} alt=\"current property\" />\n              </div>\n            </div>\n            <div className=\"row\" id=\"map\">\n              <div className=\"col-md-12\">\n                <GoogleMap address={mapAddress} />\n              </div>\n            </div>\n          </div>\n          <div className=\"col\">\n            <div className=\"card\" id=\"prop-details-container\">\n              <h5 id=\"indiv-property-details-header\" className=\"card-header text-left\">Property Details</h5>\n              <div className=\"row\">\n                <div className=\"col-md-7\">\n                  <div className=\"card-body text-left\" id=\"prop-info\">\n                    <div id=\"indiv-prop-address\">\n                      <h5>{currentRental.address1}</h5>\n                      <h5>{currentRental.address2}</h5>\n                      <h5>\n                        {`${currentRental.city}, ${currentRental.state} ${currentRental.zip}`}\n                      </h5>\n                    </div>\n                    <br />\n                    <div id=\"prop-specs\">\n                      <p id=\"tenant-name\" className=\"card-text indiv-prop-spec\">{`Current Tenant: ${currentRental.tenantFirstName} ${currentRental.tenantLastName}`}</p>\n                      <p id=\"tenant-email\" className=\"card-text indiv-prop-spec\">{`Current Tenant Email: ${currentRental.tenantEmail}`}</p>\n                      <p id=\"rental-amount\" className=\"card-text indiv-prop-spec\">{`Monthly Rental Amount: $${currentRental.monthlyRent}`}</p>\n                      <p id=\"lease-range\" className=\"card-text indiv-prop-spec\">{`Lease Date Range: ${leaseRange}`}</p>\n                    </div>\n                    <br />\n                    <EditProperty\n                      isOpen={modal}\n                      currentRental={currentRental}\n                      toggle={this.toggle}\n                      toggleSubmit={this.toggleSubmit}\n                      onSubmit={this.handlePropertyUpdate}\n                      onChange={this.handleImageUpload}\n                    />\n                    <Button id=\"edit-prop-button\" className=\"btn btn-success btn-sm\" type=\"button\" onClick={this.toggle}>Edit Details</Button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\n\nIndivPropertyDetails.propTypes = {\n  currentRental: PropTypes.objectOf(PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ])).isRequired,\n  updateCurrentRental: PropTypes.func.isRequired,\n};\n\nexport default IndivPropertyDetails;\n"]},"metadata":{},"sourceType":"module"}