{"ast":null,"code":"import _classCallCheck from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/billbuff/projects/academy/capstone/ProperT-react/src/components/Nav.jsx\";\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport LogoPic from '../images/logo-white-on-tp.png';\nimport AddProperty from './AddProperty';\nimport '../styles/Nav.css';\nimport NavbarDropdown from './Dropdown';\nimport { fetchRentals } from '../store/actions/rentalsActions';\n\nvar NavBar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(NavBar, _React$Component);\n\n  function NavBar(props) {\n    var _this;\n\n    _classCallCheck(this, NavBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NavBar).call(this, props));\n\n    _this.toggle = function () {\n      var modal = _this.state.modal;\n\n      _this.setState({\n        collapsed: true\n      });\n\n      _this.setState({\n        modal: !modal\n      });\n    };\n\n    _this.toggleNav = function () {\n      var collapsed = _this.state.collapsed;\n\n      _this.setState({\n        collapsed: !collapsed\n      });\n    };\n\n    _this.toggleSubmit = function (e) {\n      var result = e.currentTarget.form.checkValidity();\n\n      if (result) {\n        var modal = _this.state.modal;\n\n        _this.setState({\n          modal: !modal\n        });\n      }\n\n      return null;\n    };\n\n    _this.handleImageUpload = function () {\n      var preview = document.querySelector('#addRentalImage');\n      var file = document.querySelector('#add-new-property input[type=file]').files[0];\n      var reader = new FileReader();\n      reader.addEventListener('load', function () {\n        preview.src = reader.result;\n      }, false);\n\n      if (file) {\n        return reader.readAsDataURL(file);\n      }\n\n      return null;\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      axios({\n        url: 'http://127.0.0.1:3001/rentals',\n        method: 'post',\n        headers: {\n          'x-access-token': sessionStorage.getItem('jwt_token'),\n          'Content-Type': 'application/json'\n        },\n        data: {\n          address1: e.target[0].value,\n          address2: e.target[1].value,\n          city: e.target[2].value,\n          state: e.target[3].value,\n          zip: e.target[4].value,\n          tenantFirstName: e.target[5].value,\n          tenantLastName: e.target[6].value,\n          tenantEmail: e.target[7].value,\n          monthlyRent: e.target[8].value,\n          leaseStart: e.target[9].value,\n          leaseEnd: e.target[10].value,\n          image: document.getElementById('addRentalImage').src\n        }\n      }).then(function (response) {\n        var getAllRentals = _this.props.getAllRentals; // eslint-disable-next-line no-console\n\n        console.log(response);\n        getAllRentals();\n      }).catch(function (error) {\n        // eslint-disable-next-line no-console\n        console.error(error);\n      });\n    };\n\n    _this.state = {\n      modal: false,\n      collapsed: true\n    };\n    _this.loginURI = 'http://127.0.0.1:3001/auth/';\n    return _this;\n  }\n\n  _createClass(NavBar, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          rentals = _this$props.rentals,\n          isLoggedIn = _this$props.isLoggedIn,\n          fetchRentals = _this$props.fetchRentals; // eslint-disable-next-line no-multi-spaces\n\n      var propsComparisonResult = _.isEqual(rentals, prevProps.rentals);\n\n      if (!propsComparisonResult || prevProps.isLoggedIn !== isLoggedIn) {\n        fetchRentals();\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          modal = _this$state.modal,\n          collapsed = _this$state.collapsed; // eslint-disable-next-line object-curly-newline\n\n      var _this$props2 = this.props,\n          currentRental = _this$props2.currentRental,\n          updateCurrentRental = _this$props2.updateCurrentRental,\n          isLoggedIn = _this$props2.isLoggedIn,\n          handleLogout = _this$props2.handleLogout,\n          rentals = _this$props2.rentals.rentals;\n      var classOne = collapsed ? 'collapse navbar-collapse' : 'collapse navbar-collapse show';\n      var classTwo = collapsed ? 'navbar-toggler navbar-toggler-right collapsed' : 'navbar-toggler navbar-toggler-right';\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        className: \"navbar navbar-expand-md navbar-dark bg-dark\",\n        id: \"nav-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"nav-logo\",\n        className: \"navbar-brand\",\n        width: \"70px\",\n        src: LogoPic,\n        alt: \"company logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), // eslint-disable-next-line operator-linebreak\n      isLoggedIn && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.toggleNav,\n        className: classTwo,\n        type: \"button\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#navbarText\",\n        \"aria-controls\": \"navbarText\",\n        \"aria-expanded\": \"false\",\n        \"aria-label\": \"Toggle navigation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"navbar-toggler-icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: classOne,\n        id: \"navbarText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"navbar-nav mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/\",\n        onClick: this.toggleNav,\n        className: \"nav-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Dashboard\")), React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        className: \"nav-link\",\n        id: \"add-property-modal\",\n        onClick: this.toggle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Add Property\"), React.createElement(AddProperty, {\n        modal: modal,\n        toggle: this.toggle,\n        toggleSubmit: this.toggleSubmit,\n        onSubmit: this.handleSubmit,\n        onChange: this.handleImageUpload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      })), React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/user\",\n        onClick: this.toggleNav,\n        className: \"nav-link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"My Account\")), React.createElement(\"li\", {\n        className: \"nav-item\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(NavbarDropdown, {\n        className: \"nav-item\",\n        list: rentals,\n        updateCurrentRental: updateCurrentRental,\n        currentRental: currentRental,\n        toggleNav: this.toggleNav,\n        isLoggedIn: isLoggedIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }))), React.createElement(Link, {\n        to: \"/\",\n        className: \"btn btn-sm btn-outline-success\",\n        onClick: handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Logout\"))))));\n    }\n  }]);\n\n  return NavBar;\n}(React.Component);\n\nNavBar.propTypes = {\n  currentRental: PropTypes.objectOf(PropTypes.oneOfType([PropTypes.string.isRequired, PropTypes.number.isRequired])).isRequired,\n  getAllRentals: PropTypes.func.isRequired,\n  updateCurrentRental: PropTypes.func.isRequired,\n  isLoggedIn: PropTypes.bool.isRequired,\n  handleLogout: PropTypes.func.isRequired,\n  rentals: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number.isRequired])).isRequired).isRequired,\n  fetchRentals: PropTypes.func.isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    rentals: state.rentals\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchRentals: fetchRentals\n})(NavBar);","map":{"version":3,"sources":["/Users/billbuff/projects/academy/capstone/ProperT-react/src/components/Nav.jsx"],"names":["React","axios","connect","_","PropTypes","Link","LogoPic","AddProperty","NavbarDropdown","fetchRentals","NavBar","props","toggle","modal","state","setState","collapsed","toggleNav","toggleSubmit","e","result","currentTarget","form","checkValidity","handleImageUpload","preview","document","querySelector","file","files","reader","FileReader","addEventListener","src","readAsDataURL","handleSubmit","preventDefault","url","method","headers","sessionStorage","getItem","data","address1","target","value","address2","city","zip","tenantFirstName","tenantLastName","tenantEmail","monthlyRent","leaseStart","leaseEnd","image","getElementById","then","response","getAllRentals","console","log","catch","error","loginURI","prevProps","rentals","isLoggedIn","propsComparisonResult","isEqual","currentRental","updateCurrentRental","handleLogout","classOne","classTwo","Component","propTypes","objectOf","oneOfType","string","isRequired","number","func","bool","arrayOf","mapStateToProps"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/anchor-is-valid */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport React from 'react';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport LogoPic from '../images/logo-white-on-tp.png';\nimport AddProperty from './AddProperty';\nimport '../styles/Nav.css';\nimport NavbarDropdown from './Dropdown';\nimport { fetchRentals } from '../store/actions/rentalsActions';\n\nclass NavBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false,\n      collapsed: true,\n    };\n    this.loginURI = 'http://127.0.0.1:3001/auth/';\n  }\n\n  componentDidUpdate(prevProps) {\n    const { rentals, isLoggedIn, fetchRentals } = this.props;\n    // eslint-disable-next-line no-multi-spaces\n    const propsComparisonResult =  _.isEqual(rentals, prevProps.rentals);\n    if (!propsComparisonResult || prevProps.isLoggedIn !== isLoggedIn) {\n      fetchRentals();\n    }\n    return null;\n  }\n\n  toggle = () => {\n    const { modal } = this.state;\n    this.setState({ collapsed: true });\n    this.setState({\n      modal: !modal,\n    });\n  }\n\n  toggleNav = () => {\n    const { collapsed } = this.state;\n    this.setState({\n      collapsed: !collapsed,\n    });\n  }\n\n  toggleSubmit = (e) => {\n    const result = e.currentTarget.form.checkValidity();\n    if (result) {\n      const { modal } = this.state;\n      this.setState({\n        modal: !modal,\n      });\n    }\n    return null;\n  }\n\n  handleImageUpload = () => {\n    const preview = document.querySelector('#addRentalImage');\n    const file = document.querySelector('#add-new-property input[type=file]').files[0];\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      preview.src = reader.result;\n    }, false);\n\n    if (file) {\n      return reader.readAsDataURL(file);\n    }\n    return null;\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    axios({\n      url: 'http://127.0.0.1:3001/rentals',\n      method: 'post',\n      headers: {\n        'x-access-token': sessionStorage.getItem('jwt_token'),\n        'Content-Type': 'application/json',\n      },\n      data: {\n        address1: e.target[0].value,\n        address2: e.target[1].value,\n        city: e.target[2].value,\n        state: e.target[3].value,\n        zip: e.target[4].value,\n        tenantFirstName: e.target[5].value,\n        tenantLastName: e.target[6].value,\n        tenantEmail: e.target[7].value,\n        monthlyRent: e.target[8].value,\n        leaseStart: e.target[9].value,\n        leaseEnd: e.target[10].value,\n        image: document.getElementById('addRentalImage').src,\n      },\n    }).then((response) => {\n      const { getAllRentals } = this.props;\n      // eslint-disable-next-line no-console\n      console.log(response);\n      getAllRentals();\n    }).catch((error) => {\n      // eslint-disable-next-line no-console\n      console.error(error);\n    });\n  }\n\n  render() {\n    const { modal, collapsed } = this.state;\n    // eslint-disable-next-line object-curly-newline\n    const { currentRental, updateCurrentRental, isLoggedIn, handleLogout, rentals: { rentals } } = this.props;\n    const classOne = collapsed ? 'collapse navbar-collapse' : 'collapse navbar-collapse show';\n    const classTwo = collapsed ? 'navbar-toggler navbar-toggler-right collapsed' : 'navbar-toggler navbar-toggler-right';\n    return (\n      <React.Fragment>\n        <nav className=\"navbar navbar-expand-md navbar-dark bg-dark\" id=\"nav-bar\">\n          <div className=\"container\">\n            <img id=\"nav-logo\" className=\"navbar-brand\" width=\"70px\" src={LogoPic} alt=\"company logo\" />\n            {\n          // eslint-disable-next-line operator-linebreak\n          isLoggedIn &&\n          (\n            <React.Fragment>\n              <button onClick={this.toggleNav} className={classTwo} type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarText\" aria-controls=\"navbarText\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span className=\"navbar-toggler-icon\" />\n              </button>\n              <div className={classOne} id=\"navbarText\">\n                <ul className=\"navbar-nav mr-auto\">\n                  <li className=\"nav-item\">\n                    <Link to=\"/\" onClick={this.toggleNav} className=\"nav-link\">Dashboard</Link>\n                  </li>\n                  <li className=\"nav-item\">\n                    <a className=\"nav-link\" id=\"add-property-modal\" onClick={this.toggle}>Add Property</a>\n                    <AddProperty\n                      modal={modal}\n                      toggle={this.toggle}\n                      toggleSubmit={this.toggleSubmit}\n                      onSubmit={this.handleSubmit}\n                      onChange={this.handleImageUpload}\n                    />\n                  </li>\n                  <li className=\"nav-item\">\n                    <Link to=\"/user\" onClick={this.toggleNav} className=\"nav-link\">My Account</Link>\n                  </li>\n                  <li className=\"nav-item\">\n                    <NavbarDropdown\n                      className=\"nav-item\"\n                      list={rentals}\n                      updateCurrentRental={updateCurrentRental}\n                      currentRental={currentRental}\n\t\t\t\t\t\t\t\t\t\t\ttoggleNav={this.toggleNav}\n\t\t\t\t\t\t\t\t\t\t\tisLoggedIn={isLoggedIn}\n                    />\n                  </li>\n                </ul>\n                <Link to=\"/\" className=\"btn btn-sm btn-outline-success\" onClick={handleLogout}>Logout</Link>\n              </div>\n            </React.Fragment>)}\n          </div>\n        </nav>\n      </React.Fragment>\n    );\n  }\n}\n\nNavBar.propTypes = {\n  currentRental: PropTypes.objectOf(PropTypes.oneOfType([\n    PropTypes.string.isRequired,\n    PropTypes.number.isRequired,\n  ])).isRequired,\n  getAllRentals: PropTypes.func.isRequired,\n  updateCurrentRental: PropTypes.func.isRequired,\n  isLoggedIn: PropTypes.bool.isRequired,\n  handleLogout: PropTypes.func.isRequired,\n  rentals: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number.isRequired,\n  ])).isRequired).isRequired,\n  fetchRentals: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = state => ({\n  rentals: state.rentals,\n});\n\nexport default connect(mapStateToProps, { fetchRentals })(NavBar);\n"]},"metadata":{},"sourceType":"module"}