{"ast":null,"code":"import _regeneratorRuntime from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\n/* eslint-disable import/prefer-default-export */\nimport axios from 'axios';\nimport { FETCH_RENTALS } from '../types';\n\nvar fetchRentalsAction = function fetchRentalsAction(rentals) {\n  return {\n    type: FETCH_RENTALS,\n    rentals: rentals\n  };\n};\n\nvar getData = function getData(url) {\n  return fetch(url, {\n    headers: {\n      'x-access-token': sessionStorage.getItem('jwt_token')\n    }\n  }).then(function (res) {\n    return res.json();\n  }).then(function (rentals) {\n    return rentals;\n  });\n};\n\nexport var fetchRentals = function fetchRentals() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch) {\n        var response;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getData('http://127.0.0.1:3001/rentals');\n\n              case 2:\n                response = _context.sent;\n                console.log(response);\n                dispatch(fetchRentalsAction(response)); // await axios\n                //   .get('http://127.0.0.1:3001/rentals', {\n                //     headers: { 'x-access-token': sessionStorage.getItem('jwt_token') },\n                //   })\n                //   .then((rentals) => {\n                //     dispatch(fetchRentalsAction(rentals));\n                //   })\n                // // eslint-disable-next-line no-console\n                //   .catch(err => console.error(err));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};","map":{"version":3,"sources":["/Users/billbuff/projects/academy/capstone/ProperT-react/src/store/actions/rentalsActions.js"],"names":["axios","FETCH_RENTALS","fetchRentalsAction","rentals","type","getData","url","fetch","headers","sessionStorage","getItem","then","res","json","fetchRentals","dispatch","response","console","log"],"mappings":";;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,UAA9B;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,OAAO;AAAA,SAAK;AACrCC,IAAAA,IAAI,EAAEH,aAD+B;AAErCE,IAAAA,OAAO,EAAPA;AAFqC,GAAL;AAAA,CAAlC;;AAKA,IAAME,OAAO,GAAG,SAAVA,OAAU,CAAAC,GAAG;AAAA,SAAIC,KAAK,CAACD,GAAD,EAAM;AAChCE,IAAAA,OAAO,EAAE;AAAE,wBAAkBC,cAAc,CAACC,OAAf,CAAuB,WAAvB;AAApB;AADuB,GAAN,CAAL,CAGpBC,IAHoB,CAGf,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GAHY,EAIpBF,IAJoB,CAIf,UAAAR,OAAO;AAAA,WAAIA,OAAJ;AAAA,GAJQ,CAAJ;AAAA,CAAnB;;AAMA,OAAO,IAAMW,YAAY,GAAG,SAAfA,YAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAM,iBAAOC,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACTV,OAAO,CAAC,+BAAD,CADE;;AAAA;AAC1BW,gBAAAA,QAD0B;AAEhCC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAD,gBAAAA,QAAQ,CAACb,kBAAkB,CAACc,QAAD,CAAnB,CAAR,CAHgC,CAIhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAZgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB","sourcesContent":["/* eslint-disable import/prefer-default-export */\nimport axios from 'axios';\nimport { FETCH_RENTALS } from '../types';\n\nconst fetchRentalsAction = rentals => ({\n  type: FETCH_RENTALS,\n  rentals,\n});\n\nconst getData = url => fetch(url, {\n  headers: { 'x-access-token': sessionStorage.getItem('jwt_token') },\n})\n  .then(res => res.json())\n  .then(rentals => rentals);\n\nexport const fetchRentals = () => async (dispatch) => {\n  const response = await getData('http://127.0.0.1:3001/rentals');\n  console.log(response);\n  dispatch(fetchRentalsAction(response));\n  // await axios\n  //   .get('http://127.0.0.1:3001/rentals', {\n  //     headers: { 'x-access-token': sessionStorage.getItem('jwt_token') },\n  //   })\n  //   .then((rentals) => {\n  //     dispatch(fetchRentalsAction(rentals));\n  //   })\n  // // eslint-disable-next-line no-console\n  //   .catch(err => console.error(err));\n};\n"]},"metadata":{},"sourceType":"module"}