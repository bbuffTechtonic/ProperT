{"ast":null,"code":"import _classCallCheck from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/billbuff/projects/academy/capstone/ProperT-react/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/billbuff/projects/academy/capstone/ProperT-react/src/App.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport store from 'store';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport LDClient from 'ldclient-js';\nimport Landing from './components/Landing';\nimport AccountManagement from './components/AccountManagement';\nimport PropertyDetails from './components/PropertyDetails';\nimport Nav from './components/Nav';\nimport Footer from './components/Footer';\nimport './App.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.componentDidMount = function () {\n      var isLoggedIn = _this.state.isLoggedIn;\n\n      if (isLoggedIn) {\n        _this.checkTokenStatus();\n      }\n\n      var user = {\n        key: 'allusers'\n      };\n      _this.ldclient = LDClient.initialize('5c08a03c1412625ab643f790', user);\n\n      _this.ldclient.on('ready', _this.onLaunchDarklyReady.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n    };\n\n    _this.onLaunchDarklyReady = function () {\n      _this.setState({\n        featureFlags: {\n          googleAuthEnabled: _this.ldclient.variation('propert-google-auth')\n        }\n      });\n    };\n\n    _this.checkTokenStatus = function () {\n      axios.get('http://127.0.0.1:3001/auth/verify', {\n        headers: {\n          'x-access-token': sessionStorage.getItem('jwt_token')\n        }\n      }) // eslint-disable-next-line no-console\n      .then(function () {\n        return console.log('Token is valid');\n      }).catch(function () {\n        _this.handleLogout(); // eslint-disable-next-line no-alert\n\n\n        alert('Your session has expired please sign in again');\n      });\n      return false;\n    };\n\n    _this.handleLoggedInUser = function () {\n      _this.setState({\n        isLoggedIn: true\n      });\n    };\n\n    _this.handleLogout = function () {\n      sessionStorage.removeItem('jwt_token');\n\n      _this.setState({\n        isLoggedIn: false\n      });\n\n      sessionStorage.clear();\n      store.clearAll();\n    };\n\n    var loginStatus = !!sessionStorage.getItem('jwt_token');\n    _this.state = {\n      isLoggedIn: loginStatus\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // eslint-disable-next-line object-curly-newline\n      var _this$state = this.state,\n          isLoggedIn = _this$state.isLoggedIn,\n          currentRental = _this$state.currentRental,\n          featureFlags = _this$state.featureFlags;\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        currentRental: currentRental,\n        isLoggedIn: isLoggedIn,\n        handleLogout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        id: \"main\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(props) {\n          return React.createElement(Landing, Object.assign({}, props, {\n            isLoggedIn: isLoggedIn,\n            handleLoggedInUser: _this2.handleLoggedInUser,\n            featureFlags: featureFlags,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/user\",\n        render: function render() {\n          return isLoggedIn ? React.createElement(AccountManagement, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 98\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/rentals/:id/\",\n        render: function render(props) {\n          return isLoggedIn ? React.createElement(PropertyDetails, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          }) : React.createElement(Redirect, {\n            to: \"/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component); // const mapStateToProps = state => ({\n// });\n\n\nexport default App;","map":{"version":3,"sources":["/Users/billbuff/projects/academy/capstone/ProperT-react/src/App.jsx"],"names":["React","Component","axios","_","store","BrowserRouter","Router","Route","Redirect","LDClient","Landing","AccountManagement","PropertyDetails","Nav","Footer","App","componentDidMount","isLoggedIn","state","checkTokenStatus","user","key","ldclient","initialize","on","onLaunchDarklyReady","bind","setState","featureFlags","googleAuthEnabled","variation","get","headers","sessionStorage","getItem","then","console","log","catch","handleLogout","alert","handleLoggedInUser","removeItem","clear","clearAll","loginStatus","currentRental","props"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport store from 'store';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport LDClient from 'ldclient-js';\nimport Landing from './components/Landing';\nimport AccountManagement from './components/AccountManagement';\nimport PropertyDetails from './components/PropertyDetails';\nimport Nav from './components/Nav';\nimport Footer from './components/Footer';\nimport './App.css';\n\nclass App extends Component {\n  constructor() {\n    super();\n    const loginStatus = !!sessionStorage.getItem('jwt_token');\n    this.state = {\n      isLoggedIn: loginStatus,\n    };\n  }\n\n  componentDidMount = () => {\n    const { isLoggedIn } = this.state;\n    if (isLoggedIn) {\n      this.checkTokenStatus();\n    }\n    const user = {\n      key: 'allusers',\n    };\n    this.ldclient = LDClient.initialize('5c08a03c1412625ab643f790', user);\n    this.ldclient.on('ready', this.onLaunchDarklyReady.bind(this));\n  }\n\n  onLaunchDarklyReady = () => {\n    this.setState({\n      featureFlags: { googleAuthEnabled: this.ldclient.variation('propert-google-auth') },\n    });\n  }\n\n  checkTokenStatus = () => {\n    axios.get('http://127.0.0.1:3001/auth/verify', {\n      headers: { 'x-access-token': sessionStorage.getItem('jwt_token') },\n    })\n      // eslint-disable-next-line no-console\n      .then(() => console.log('Token is valid'))\n      .catch(() => {\n        this.handleLogout();\n        // eslint-disable-next-line no-alert\n        alert('Your session has expired please sign in again');\n      });\n\n    return false;\n  }\n\n  handleLoggedInUser = () => {\n    this.setState({\n      isLoggedIn: true,\n    });\n  }\n\n  handleLogout = () => {\n    sessionStorage.removeItem('jwt_token');\n    this.setState({ isLoggedIn: false });\n    sessionStorage.clear();\n    store.clearAll();\n  }\n\n  render() {\n    // eslint-disable-next-line object-curly-newline\n    const { isLoggedIn, currentRental, featureFlags } = this.state;\n    return (\n      <Router>\n        <div className=\"App\">\n          <Nav\n            currentRental={currentRental}\n            isLoggedIn={isLoggedIn}\n            handleLogout={this.handleLogout}\n          />\n          <main id=\"main\">\n            <Route\n              exact\n              path=\"/\"\n              render={props => (\n                <Landing\n                  {...props}\n                  isLoggedIn={isLoggedIn}\n                  handleLoggedInUser={this.handleLoggedInUser}\n                  featureFlags={featureFlags}\n                />\n              )}\n            />\n            <Route\n              path=\"/user\"\n              render={() => (\n                isLoggedIn\n                  ? <AccountManagement />\n                  : <Redirect to=\"/\" />\n              )}\n            />\n            <Route\n              path=\"/rentals/:id/\"\n              render={props => (\n                isLoggedIn\n                  ? (\n                    <PropertyDetails />)\n                  : <Redirect to=\"/\" />\n              )}\n            />\n          </main>\n          <Footer />\n        </div>\n      </Router>\n    );\n  }\n}\n\n// const mapStateToProps = state => ({\n\n// });\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}